"use strict";
var uid = require("uid");
var default_1 = (function () {
    function default_1(conf) {
        var _id;
        if (conf && conf.class) {
            this.class = conf.class;
            if (!conf || !conf._id)
                _id = this.class + "_";
        }
        else if (!conf || !conf._id) {
            _id = "data_";
        }
        if (conf && conf.serial) {
            this.serial = conf.serial;
            if (!conf || !conf._id)
                _id = _id + this.serial + "_";
        }
        else if (!conf || !conf._id) {
            _id = _id + "00000_";
        }
        if (conf && conf.apiVersion)
            this.apiVersion = conf.apiVersion;
        if (conf && conf.createdAt) {
            this.createdAt = conf.createdAt;
        }
        else {
            this.createdAt = new Date().getTime();
        }
        if (!conf || !conf._id)
            _id = _id + this.createdAt + "_";
        if (conf && conf.updatedAt) {
            this.updatedAt = conf.updatedAt;
        }
        else {
            this.updatedAt = this.createdAt;
        }
        if (conf && conf._id) {
            _id = conf._id;
        }
        else {
            _id = _id + uid(6);
        }
        this._id = _id;
    }
    return default_1;
}());
Object.defineProperty(exports, "__esModule", { value: true });
exports.default = default_1;

//# sourceMappingURL=data:application/json;charset=utf8;base64,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aWQgPSByZXF1aXJlKFwidWlkXCIpO1xuXG5cbmludGVyZmFjZSBJdWlkIHtcbiAgICAobj86IG51bWJlcik6IHN0cmluZ1xufVxuXG5pbnRlcmZhY2UgSUNvdWNob2JqIHtcblxuXG4gICAgX2lkOiBzdHJpbmc7XG4gICAgY3JlYXRlZEF0OiBudW1iZXI7XG4gICAgdXBkYXRlZEF0OiBudW1iZXI7XG4gICAgcGVybWFsaW5rOiBzdHJpbmc7XG4gICAgdWlkOiBzdHJpbmc7XG4gICAgX3Jldjogc3RyaW5nO1xuICAgIGFwaVZlcnNpb246IHN0cmluZztcbiAgICBjbGFzczogc3RyaW5nO1xufVxuXG5cbmludGVyZmFjZSBJY29uZiB7XG5cbiAgICBfaWQ/OiBzdHJpbmc7XG4gICAgY3JlYXRlZEF0PzogbnVtYmVyO1xuICAgIHVwZGF0ZWRBdD86IG51bWJlcjtcbiAgICBzZXJpYWw/OiBhbnk7XG4gICAgX3Jldj86IHN0cmluZztcbiAgICBhcGlWZXJzaW9uPzogc3RyaW5nO1xuICAgIGNsYXNzPzogYW55O1xuXG59XG5cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3Mge1xuXG5cbiAgICBfaWQ6IHN0cmluZztcbiAgICBjcmVhdGVkQXQ6IG51bWJlcjtcbiAgICB1cGRhdGVkQXQ6IG51bWJlcjtcbiAgICBzZXJpYWw6IHN0cmluZztcbiAgICBfcmV2OiBzdHJpbmc7XG4gICAgYXBpVmVyc2lvbjogc3RyaW5nO1xuICAgIGNsYXNzOiBzdHJpbmc7XG5cblxuXG4gICAgY29uc3RydWN0b3IoY29uZj86IEljb25mKSB7XG5cbiAgICAgICAgbGV0IF9pZDtcblxuICAgICAgICBpZiAoY29uZiAmJiBjb25mLmNsYXNzKSB7XG4gICAgICAgICAgICB0aGlzLmNsYXNzID0gY29uZi5jbGFzcztcbiAgICAgICAgICAgIGlmICghY29uZiB8fCAhY29uZi5faWQpIF9pZCA9IHRoaXMuY2xhc3MgKyBcIl9cIjtcbiAgICAgICAgfSBlbHNlIGlmICghY29uZiB8fCAhY29uZi5faWQpIHtcbiAgICAgICAgICAgIF9pZCA9IFwiZGF0YV9cIjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjb25mICYmIGNvbmYuc2VyaWFsKSB7XG4gICAgICAgICAgICB0aGlzLnNlcmlhbCA9IGNvbmYuc2VyaWFsO1xuICAgICAgICAgICAgaWYgKCFjb25mIHx8ICFjb25mLl9pZCkgX2lkID0gX2lkICsgdGhpcy5zZXJpYWwgKyBcIl9cIjtcbiAgICAgICAgfSBlbHNlIGlmICghY29uZiB8fCAhY29uZi5faWQpIHtcbiAgICAgICAgICAgIF9pZCA9IF9pZCArIFwiMDAwMDBfXCI7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGlmIChjb25mICYmIGNvbmYuYXBpVmVyc2lvbikgdGhpcy5hcGlWZXJzaW9uID0gY29uZi5hcGlWZXJzaW9uO1xuXG4gICAgICAgIGlmIChjb25mICYmIGNvbmYuY3JlYXRlZEF0KSB7XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZWRBdCA9IGNvbmYuY3JlYXRlZEF0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVkQXQgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghY29uZiB8fCAhY29uZi5faWQpIF9pZCA9IF9pZCArIHRoaXMuY3JlYXRlZEF0ICsgXCJfXCI7XG5cbiAgICAgICAgaWYgKGNvbmYgJiYgY29uZi51cGRhdGVkQXQpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlZEF0ID0gY29uZi51cGRhdGVkQXRcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlZEF0ID0gdGhpcy5jcmVhdGVkQXQ7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGlmIChjb25mICYmIGNvbmYuX2lkKSB7XG4gICAgICAgICAgICBfaWQgPSBjb25mLl9pZFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgX2lkID0gX2lkICsgdWlkKDYpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5faWQgPSBfaWQ7XG4gICAgICAgXG5cbiAgICAgICAgLy8gdGhpcy5sb2NhdGlvbnMgPSBldmVudC5sb2NhdGlvbnM7XG5cbiAgICB9XG5cbn1cblxuXG5cblxuIl19
