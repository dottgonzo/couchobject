"use strict";
const uid = require("uid");
class Obj {
    constructor(conf) {
        let _id;
        if (conf && conf.class) {
            this.class = conf.class;
            if (!conf || !conf._id)
                _id = this.class + "_";
        }
        else if (!conf || !conf._id) {
            _id = "data_";
        }
        if (conf && conf.serial) {
            this.serial = conf.serial;
            if (!conf || !conf._id)
                _id = _id + this.serial + "_";
        }
        else if (!conf || !conf._id) {
            _id = _id + "00000_";
        }
        if (conf && conf.apiVersion)
            this.apiVersion = conf.apiVersion;
        if (conf && conf.createdAt) {
            this.createdAt = conf.createdAt;
        }
        else {
            this.createdAt = new Date().getTime();
        }
        if (!conf || !conf._id)
            _id = _id + this.createdAt + "_";
        if (conf && conf.updatedAt) {
            this.updatedAt = conf.updatedAt;
        }
        else {
            this.updatedAt = this.createdAt;
        }
        if (conf && conf._id) {
            _id = conf._id;
        }
        else {
            _id = _id + uid(6);
        }
        this._id = _id;
    }
}
Object.defineProperty(exports, "__esModule", { value: true });
exports.default = Obj;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxNQUFNLEdBQUcsR0FBUyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUM7QUFrQ2pDO0lBYUksWUFBWSxJQUFZO1FBRXBCLElBQUksR0FBRyxDQUFDO1FBRVIsRUFBRSxDQUFDLENBQUMsSUFBSSxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO1lBQ3JCLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQztZQUN4QixFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUM7Z0JBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxLQUFLLEdBQUcsR0FBRyxDQUFDO1FBQ25ELENBQUM7UUFBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUM1QixHQUFHLEdBQUcsT0FBTyxDQUFDO1FBQ2xCLENBQUM7UUFFRCxFQUFFLENBQUMsQ0FBQyxJQUFJLElBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7WUFDdEIsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDO1lBQzFCLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQztnQkFBQyxHQUFHLEdBQUcsR0FBRyxHQUFHLElBQUksQ0FBQyxNQUFNLEdBQUcsR0FBRyxDQUFDO1FBQzFELENBQUM7UUFBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUM1QixHQUFHLEdBQUcsR0FBRyxHQUFHLFFBQVEsQ0FBQztRQUN6QixDQUFDO1FBR0QsRUFBRSxDQUFDLENBQUMsSUFBSSxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUM7WUFBQyxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUM7UUFFL0QsRUFBRSxDQUFDLENBQUMsSUFBSSxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDO1lBQ3pCLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQztRQUNwQyxDQUFDO1FBQUMsSUFBSSxDQUFDLENBQUM7WUFDSixJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksSUFBSSxFQUFFLENBQUMsT0FBTyxFQUFFLENBQUM7UUFDMUMsQ0FBQztRQUVELEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQztZQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsSUFBSSxDQUFDLFNBQVMsR0FBRyxHQUFHLENBQUM7UUFFekQsRUFBRSxDQUFDLENBQUMsSUFBSSxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDO1lBQ3pCLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQTtRQUNuQyxDQUFDO1FBQUMsSUFBSSxDQUFDLENBQUM7WUFDSixJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUM7UUFDcEMsQ0FBQztRQUdELEVBQUUsQ0FBQyxDQUFDLElBQUksSUFBSSxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUNuQixHQUFHLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQTtRQUNsQixDQUFDO1FBQUMsSUFBSSxDQUFDLENBQUM7WUFDSixHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN2QixDQUFDO1FBRUQsSUFBSSxDQUFDLEdBQUcsR0FBRyxHQUFHLENBQUM7SUFLbkIsQ0FBQztBQUVMLENBQUM7QUE5REQ7cUJBOERDLENBQUEiLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB1aWQ6IEl1aWQgPSByZXF1aXJlKFwidWlkXCIpO1xuXG5cbmludGVyZmFjZSBJdWlkIHtcbiAgICAobj86IG51bWJlcik6IHN0cmluZ1xufVxuXG5pbnRlcmZhY2UgSUNvdWNob2JqIHtcblxuXG4gICAgX2lkOiBzdHJpbmc7XG4gICAgY3JlYXRlZEF0OiBudW1iZXI7XG4gICAgdXBkYXRlZEF0OiBudW1iZXI7XG4gICAgcGVybWFsaW5rOiBzdHJpbmc7XG4gICAgdWlkOiBzdHJpbmc7XG4gICAgX3Jldjogc3RyaW5nO1xuICAgIGFwaVZlcnNpb246IHN0cmluZztcbiAgICBjbGFzczogc3RyaW5nO1xufVxuXG5cbmludGVyZmFjZSBJY29uZiB7XG5cbiAgICBfaWQ/OiBzdHJpbmc7XG4gICAgY3JlYXRlZEF0PzogbnVtYmVyO1xuICAgIHVwZGF0ZWRBdD86IG51bWJlcjtcbiAgICBzZXJpYWw/OiBhbnk7XG4gICAgX3Jldj86IHN0cmluZztcbiAgICBhcGlWZXJzaW9uPzogc3RyaW5nO1xuICAgIGNsYXNzPzogYW55O1xuXG59XG5cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgT2JqIHtcblxuXG4gICAgX2lkOiBzdHJpbmc7XG4gICAgY3JlYXRlZEF0OiBudW1iZXI7XG4gICAgdXBkYXRlZEF0OiBudW1iZXI7XG4gICAgc2VyaWFsOiBzdHJpbmc7XG4gICAgX3Jldjogc3RyaW5nO1xuICAgIGFwaVZlcnNpb246IHN0cmluZztcbiAgICBjbGFzczogc3RyaW5nO1xuXG5cblxuICAgIGNvbnN0cnVjdG9yKGNvbmY/OiBJY29uZikge1xuXG4gICAgICAgIGxldCBfaWQ7XG5cbiAgICAgICAgaWYgKGNvbmYgJiYgY29uZi5jbGFzcykge1xuICAgICAgICAgICAgdGhpcy5jbGFzcyA9IGNvbmYuY2xhc3M7XG4gICAgICAgICAgICBpZiAoIWNvbmYgfHwgIWNvbmYuX2lkKSBfaWQgPSB0aGlzLmNsYXNzICsgXCJfXCI7XG4gICAgICAgIH0gZWxzZSBpZiAoIWNvbmYgfHwgIWNvbmYuX2lkKSB7XG4gICAgICAgICAgICBfaWQgPSBcImRhdGFfXCI7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY29uZiAmJiBjb25mLnNlcmlhbCkge1xuICAgICAgICAgICAgdGhpcy5zZXJpYWwgPSBjb25mLnNlcmlhbDtcbiAgICAgICAgICAgIGlmICghY29uZiB8fCAhY29uZi5faWQpIF9pZCA9IF9pZCArIHRoaXMuc2VyaWFsICsgXCJfXCI7XG4gICAgICAgIH0gZWxzZSBpZiAoIWNvbmYgfHwgIWNvbmYuX2lkKSB7XG4gICAgICAgICAgICBfaWQgPSBfaWQgKyBcIjAwMDAwX1wiO1xuICAgICAgICB9XG5cblxuICAgICAgICBpZiAoY29uZiAmJiBjb25mLmFwaVZlcnNpb24pIHRoaXMuYXBpVmVyc2lvbiA9IGNvbmYuYXBpVmVyc2lvbjtcblxuICAgICAgICBpZiAoY29uZiAmJiBjb25mLmNyZWF0ZWRBdCkge1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVkQXQgPSBjb25mLmNyZWF0ZWRBdDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlZEF0ID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWNvbmYgfHwgIWNvbmYuX2lkKSBfaWQgPSBfaWQgKyB0aGlzLmNyZWF0ZWRBdCArIFwiX1wiO1xuXG4gICAgICAgIGlmIChjb25mICYmIGNvbmYudXBkYXRlZEF0KSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZWRBdCA9IGNvbmYudXBkYXRlZEF0XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZWRBdCA9IHRoaXMuY3JlYXRlZEF0O1xuICAgICAgICB9XG5cblxuICAgICAgICBpZiAoY29uZiAmJiBjb25mLl9pZCkge1xuICAgICAgICAgICAgX2lkID0gY29uZi5faWRcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIF9pZCA9IF9pZCArIHVpZCg2KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX2lkID0gX2lkO1xuICAgICAgIFxuXG4gICAgICAgIC8vIHRoaXMubG9jYXRpb25zID0gZXZlbnQubG9jYXRpb25zO1xuXG4gICAgfVxuXG59XG5cblxuXG5cbiJdfQ==
