"use strict";
var uid = require("uid");
var Couchobj = (function () {
    function Couchobj(conf) {
        var _id;
        if (conf && conf.class) {
            this.class = conf.class;
            if (!conf || !conf._id)
                _id = this.class + "_";
        }
        else if (!conf || !conf._id) {
            _id = "data_";
        }
        if (conf && conf.serial) {
            this.serial = conf.serial;
            if (!conf || !conf._id)
                _id = _id + this.serial + "_";
        }
        else if (!conf || !conf._id) {
            _id = _id + "00000_";
        }
        if (conf && conf.apiVersion)
            this.apiVersion = conf.apiVersion;
        if (conf && conf.createdAt) {
            this.createdAt = conf.createdAt;
        }
        else {
            this.createdAt = new Date().getTime();
        }
        if (!conf || !conf._id)
            _id = _id + this.createdAt + "_";
        if (conf && conf.updatedAt) {
            this.updatedAt = conf.updatedAt;
        }
        else {
            this.updatedAt = this.createdAt;
        }
        if (conf && conf._id) {
            _id = conf._id;
        }
        else {
            _id = _id + uid(5);
        }
        this._id = _id;
    }
    return Couchobj;
}());
module.exports = Couchobj;

//# sourceMappingURL=data:application/json;charset=utf8;base64,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dWlkIHtcbiAgICAobj86IG51bWJlcik6IHN0cmluZ1xufVxuXG5sZXQgdWlkOiBJdWlkID0gcmVxdWlyZShcInVpZFwiKTtcblxuXG5pbnRlcmZhY2UgSUNvdWNob2JqIHtcblxuXG4gICAgX2lkOiBzdHJpbmc7XG4gICAgY3JlYXRlZEF0OiBudW1iZXI7XG4gICAgdXBkYXRlZEF0OiBudW1iZXI7XG4gICAgcGVybWFsaW5rOiBzdHJpbmc7XG4gICAgdWlkOiBzdHJpbmc7XG4gICAgX3Jldjogc3RyaW5nO1xuICAgIGFwaVZlcnNpb246IHN0cmluZztcbiAgICBjbGFzczogc3RyaW5nO1xufVxuXG5cbmludGVyZmFjZSBJY29uZiB7XG5cbiAgICBfaWQ/OiBzdHJpbmc7XG4gICAgY3JlYXRlZEF0PzogbnVtYmVyO1xuICAgIHVwZGF0ZWRBdD86IG51bWJlcjtcbiAgICBzZXJpYWw/OiBhbnk7XG4gICAgX3Jldj86IHN0cmluZztcbiAgICBhcGlWZXJzaW9uPzogc3RyaW5nO1xuICAgIGNsYXNzPzogYW55O1xuXG59XG5cblxuY2xhc3MgQ291Y2hvYmoge1xuXG5cbiAgICBfaWQ6IHN0cmluZztcbiAgICBjcmVhdGVkQXQ6IG51bWJlcjtcbiAgICB1cGRhdGVkQXQ6IG51bWJlcjtcbiAgICBzZXJpYWw6IHN0cmluZztcbiAgICBfcmV2OiBzdHJpbmc7XG4gICAgYXBpVmVyc2lvbjogc3RyaW5nO1xuICAgIGNsYXNzOiBzdHJpbmc7XG5cblxuXG4gICAgY29uc3RydWN0b3IoY29uZj86IEljb25mKSB7XG5cbiAgICAgICAgbGV0IF9pZDtcblxuXG4gICAgICAgIGlmIChjb25mICYmIGNvbmYuY2xhc3MpIHtcbiAgICAgICAgICAgIHRoaXMuY2xhc3MgPSBjb25mLmNsYXNzO1xuICAgICAgICAgICAgaWYgKCFjb25mIHx8ICFjb25mLl9pZCkgX2lkID0gdGhpcy5jbGFzcyArIFwiX1wiO1xuICAgICAgICB9IGVsc2UgaWYgKCFjb25mIHx8ICFjb25mLl9pZCkge1xuICAgICAgICAgICAgX2lkID0gXCJkYXRhX1wiO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNvbmYgJiYgY29uZi5zZXJpYWwpIHtcbiAgICAgICAgICAgIHRoaXMuc2VyaWFsID0gY29uZi5zZXJpYWw7XG4gICAgICAgICAgICBpZiAoIWNvbmYgfHwgIWNvbmYuX2lkKSBfaWQgPSBfaWQgKyB0aGlzLnNlcmlhbCArIFwiX1wiO1xuICAgICAgICB9IGVsc2UgaWYgKCFjb25mIHx8ICFjb25mLl9pZCkge1xuICAgICAgICAgICAgX2lkID0gX2lkICsgXCIwMDAwMF9cIjtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgaWYgKGNvbmYgJiYgY29uZi5hcGlWZXJzaW9uKSB0aGlzLmFwaVZlcnNpb24gPSBjb25mLmFwaVZlcnNpb247XG5cblxuICAgICAgICBpZiAoY29uZiAmJiBjb25mLmNyZWF0ZWRBdCkge1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVkQXQgPSBjb25mLmNyZWF0ZWRBdDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlZEF0ID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWNvbmYgfHwgIWNvbmYuX2lkKSBfaWQgPSBfaWQgKyB0aGlzLmNyZWF0ZWRBdCArIFwiX1wiO1xuXG4gICAgICAgIGlmIChjb25mICYmIGNvbmYudXBkYXRlZEF0KSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZWRBdCA9IGNvbmYudXBkYXRlZEF0XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZWRBdCA9IHRoaXMuY3JlYXRlZEF0O1xuICAgICAgICB9XG5cblxuICAgICAgICBpZiAoY29uZiAmJiBjb25mLl9pZCkge1xuXG4gICAgICAgICAgICBfaWQgPSBjb25mLl9pZFxuXG4gICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgIF9pZCA9IF9pZCArIHVpZCg1KTtcblxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5faWQgPSBfaWQ7XG4gICAgICAgXG5cblxuICAgICAgICAvLyB0aGlzLmxvY2F0aW9ucyA9IGV2ZW50LmxvY2F0aW9ucztcblxuXG5cbiAgICB9XG5cblxuXG59XG5cblxuXG5leHBvcnQgPSBDb3VjaG9ialxuIl19
