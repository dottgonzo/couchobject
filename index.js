"use strict";
var uid = require("uid");
var Couchobj = (function () {
    function Couchobj(conf) {
        var _id;
        if (conf && conf._class) {
            this._class = conf._class;
            if (!conf || !conf._id)
                _id = this._class + "_";
        }
        else if (!conf || !conf._id) {
            _id = "data_";
        }
        if (conf && conf._serial) {
            this._serial = conf._serial;
            if (!conf || !conf._id)
                _id = _id + this._serial + "_";
        }
        else if (!conf || !conf._id) {
            _id = _id + "00000_";
        }
        if (conf && conf._apiVersion)
            this._apiVersion = conf._apiVersion;
        if (conf && conf._createdAt) {
            this._createdAt = conf._createdAt;
        }
        else {
            this._createdAt = new Date().getTime();
        }
        if (!conf || !conf._id)
            _id = _id + this._createdAt + "_";
        if (conf && conf._updatedAt) {
            this._updatedAt = conf._updatedAt;
        }
        else {
            this._updatedAt = this._createdAt;
        }
        if (conf && conf._id) {
            _id = conf._id;
        }
        else {
            _id = _id + uid(5);
        }
        this._id = _id;
    }
    return Couchobj;
}());
module.exports = Couchobj;

//# sourceMappingURL=data:application/json;charset=utf8;base64,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dWlkIHtcbiAgICAobj86IG51bWJlcik6IHN0cmluZ1xufVxuXG5sZXQgdWlkOiBJdWlkID0gcmVxdWlyZShcInVpZFwiKTtcblxuXG5pbnRlcmZhY2UgSUNvdWNob2JqIHtcblxuXG4gICAgX2lkOiBzdHJpbmc7XG4gICAgY3JlYXRlZEF0OiBudW1iZXI7XG4gICAgdXBkYXRlZEF0OiBudW1iZXI7XG4gICAgcGVybWFsaW5rOiBzdHJpbmc7XG4gICAgdWlkOiBzdHJpbmc7XG4gICAgX3Jldjogc3RyaW5nO1xuICAgIF9hcGlWZXJzaW9uOiBzdHJpbmc7XG4gICAgY2xhc3M6IHN0cmluZztcbn1cblxuXG5pbnRlcmZhY2UgSWNvbmYge1xuXG4gICAgX2lkPzogc3RyaW5nO1xuICAgIF9jcmVhdGVkQXQ/OiBudW1iZXI7XG4gICAgX3VwZGF0ZWRBdD86IG51bWJlcjtcbiAgICBfc2VyaWFsPzogYW55O1xuICAgIF9yZXY/OiBzdHJpbmc7XG4gICAgX2FwaVZlcnNpb24/OiBzdHJpbmc7XG4gICAgX2NsYXNzPzogYW55O1xuXG59XG5cblxuY2xhc3MgQ291Y2hvYmoge1xuXG5cbiAgICBfaWQ6IHN0cmluZztcbiAgICBfY3JlYXRlZEF0OiBudW1iZXI7XG4gICAgX3VwZGF0ZWRBdDogbnVtYmVyO1xuICAgIF9zZXJpYWw6IHN0cmluZztcbiAgICBfcmV2OiBzdHJpbmc7XG4gICAgX2FwaVZlcnNpb246IHN0cmluZztcbiAgICBfY2xhc3M6IHN0cmluZztcblxuXG5cbiAgICBjb25zdHJ1Y3Rvcihjb25mPzogSWNvbmYpIHtcblxuICAgICAgICBsZXQgX2lkO1xuXG5cbiAgICAgICAgaWYgKGNvbmYgJiYgY29uZi5fY2xhc3MpIHtcbiAgICAgICAgICAgIHRoaXMuX2NsYXNzID0gY29uZi5fY2xhc3M7XG4gICAgICAgICAgICBpZiAoIWNvbmYgfHwgIWNvbmYuX2lkKSBfaWQgPSB0aGlzLl9jbGFzcyArIFwiX1wiO1xuICAgICAgICB9IGVsc2UgaWYgKCFjb25mIHx8ICFjb25mLl9pZCkge1xuICAgICAgICAgICAgX2lkID0gXCJkYXRhX1wiO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNvbmYgJiYgY29uZi5fc2VyaWFsKSB7XG4gICAgICAgICAgICB0aGlzLl9zZXJpYWwgPSBjb25mLl9zZXJpYWw7XG4gICAgICAgICAgICBpZiAoIWNvbmYgfHwgIWNvbmYuX2lkKSBfaWQgPSBfaWQgKyB0aGlzLl9zZXJpYWwgKyBcIl9cIjtcbiAgICAgICAgfSBlbHNlIGlmICghY29uZiB8fCAhY29uZi5faWQpIHtcbiAgICAgICAgICAgIF9pZCA9IF9pZCArIFwiMDAwMDBfXCI7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGlmIChjb25mICYmIGNvbmYuX2FwaVZlcnNpb24pIHRoaXMuX2FwaVZlcnNpb24gPSBjb25mLl9hcGlWZXJzaW9uO1xuXG5cbiAgICAgICAgaWYgKGNvbmYgJiYgY29uZi5fY3JlYXRlZEF0KSB7XG4gICAgICAgICAgICB0aGlzLl9jcmVhdGVkQXQgPSBjb25mLl9jcmVhdGVkQXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9jcmVhdGVkQXQgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghY29uZiB8fCAhY29uZi5faWQpIF9pZCA9IF9pZCArIHRoaXMuX2NyZWF0ZWRBdCArIFwiX1wiO1xuXG4gICAgICAgIGlmIChjb25mICYmIGNvbmYuX3VwZGF0ZWRBdCkge1xuICAgICAgICAgICAgdGhpcy5fdXBkYXRlZEF0ID0gY29uZi5fdXBkYXRlZEF0XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl91cGRhdGVkQXQgPSB0aGlzLl9jcmVhdGVkQXQ7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGlmIChjb25mICYmIGNvbmYuX2lkKSB7XG5cbiAgICAgICAgICAgIF9pZCA9IGNvbmYuX2lkXG5cbiAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgX2lkID0gX2lkICsgdWlkKDUpO1xuXG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9pZCA9IF9pZDtcbiAgICAgICBcblxuXG4gICAgICAgIC8vIHRoaXMubG9jYXRpb25zID0gZXZlbnQubG9jYXRpb25zO1xuXG5cblxuICAgIH1cblxuXG5cbn1cblxuXG5cbmV4cG9ydCA9IENvdWNob2JqXG4iXX0=
