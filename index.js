"use strict";
const uid = require("uid");
function Obj(conf) {
    let _id;
    const _this = {};
    if (conf && conf.class) {
        _this.class = conf.class;
        if (!conf || !conf._id)
            _id = _this.class + "_";
    }
    else if (!conf || !conf._id) {
        _id = "data_";
    }
    if (conf && conf.serial) {
        _this.serial = conf.serial;
        if (!conf || !conf._id)
            _id = _id + _this.serial + "_";
    }
    else if (!conf || !conf._id) {
        _id = _id + "00000_";
    }
    if (conf && conf.apiVersion)
        _this.apiVersion = conf.apiVersion;
    if (conf && conf.createdAt) {
        _this.createdAt = conf.createdAt;
    }
    else {
        _this.createdAt = new Date().getTime();
    }
    if (!conf || !conf._id)
        _id = _id + _this.createdAt + "_";
    if (conf && conf.updatedAt) {
        _this.updatedAt = conf.updatedAt;
    }
    else {
        _this.updatedAt = _this.createdAt;
    }
    if (conf && conf._id) {
        _id = conf._id;
    }
    else {
        _id = _id + uid(6);
    }
    _this._id = _id;
    return _this;
}
Object.defineProperty(exports, "__esModule", { value: true });
exports.default = Obj;

//# sourceMappingURL=data:application/json;charset=utf8;base64,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dCI6WyJjb25zdCB1aWQ6IEl1aWQgPSByZXF1aXJlKFwidWlkXCIpO1xuXG5cbmludGVyZmFjZSBJdWlkIHtcbiAgICAobj86IG51bWJlcik6IHN0cmluZ1xufVxuXG5pbnRlcmZhY2UgSUNvdWNob2JqIHtcblxuXG4gICAgX2lkOiBzdHJpbmc7XG4gICAgY3JlYXRlZEF0OiBudW1iZXI7XG4gICAgdXBkYXRlZEF0OiBudW1iZXI7XG4gICAgc2VyaWFsOiBzdHJpbmc7XG4gICAgX3Jldjogc3RyaW5nO1xuICAgIGFwaVZlcnNpb246IHN0cmluZztcbiAgICBjbGFzczogc3RyaW5nO1xufVxuXG5cbmludGVyZmFjZSBJY29uZiB7XG5cbiAgICBfaWQ/OiBzdHJpbmc7XG4gICAgY3JlYXRlZEF0PzogbnVtYmVyO1xuICAgIHVwZGF0ZWRBdD86IG51bWJlcjtcbiAgICBzZXJpYWw/OiBhbnk7XG4gICAgX3Jldj86IHN0cmluZztcbiAgICBhcGlWZXJzaW9uPzogc3RyaW5nO1xuICAgIGNsYXNzPzogYW55O1xuXG59XG5cblxuXG5cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gT2JqKGNvbmY/OiBJY29uZik6IElDb3VjaG9iaiB7XG5cbiAgICBsZXQgX2lkOiBzdHJpbmc7XG5cbiAgICBjb25zdCBfdGhpcyA9IDxJQ291Y2hvYmo+e31cblxuICAgIGlmIChjb25mICYmIGNvbmYuY2xhc3MpIHtcbiAgICAgICAgX3RoaXMuY2xhc3MgPSBjb25mLmNsYXNzO1xuICAgICAgICBpZiAoIWNvbmYgfHwgIWNvbmYuX2lkKSBfaWQgPSBfdGhpcy5jbGFzcyArIFwiX1wiO1xuICAgIH0gZWxzZSBpZiAoIWNvbmYgfHwgIWNvbmYuX2lkKSB7XG4gICAgICAgIF9pZCA9IFwiZGF0YV9cIjtcbiAgICB9XG5cbiAgICBpZiAoY29uZiAmJiBjb25mLnNlcmlhbCkge1xuICAgICAgICBfdGhpcy5zZXJpYWwgPSBjb25mLnNlcmlhbDtcbiAgICAgICAgaWYgKCFjb25mIHx8ICFjb25mLl9pZCkgX2lkID0gX2lkICsgX3RoaXMuc2VyaWFsICsgXCJfXCI7XG4gICAgfSBlbHNlIGlmICghY29uZiB8fCAhY29uZi5faWQpIHtcbiAgICAgICAgX2lkID0gX2lkICsgXCIwMDAwMF9cIjtcbiAgICB9XG5cblxuICAgIGlmIChjb25mICYmIGNvbmYuYXBpVmVyc2lvbikgX3RoaXMuYXBpVmVyc2lvbiA9IGNvbmYuYXBpVmVyc2lvbjtcblxuICAgIGlmIChjb25mICYmIGNvbmYuY3JlYXRlZEF0KSB7XG4gICAgICAgIF90aGlzLmNyZWF0ZWRBdCA9IGNvbmYuY3JlYXRlZEF0O1xuICAgIH0gZWxzZSB7XG4gICAgICAgIF90aGlzLmNyZWF0ZWRBdCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgIH1cblxuICAgIGlmICghY29uZiB8fCAhY29uZi5faWQpIF9pZCA9IF9pZCArIF90aGlzLmNyZWF0ZWRBdCArIFwiX1wiO1xuXG4gICAgaWYgKGNvbmYgJiYgY29uZi51cGRhdGVkQXQpIHtcbiAgICAgICAgX3RoaXMudXBkYXRlZEF0ID0gY29uZi51cGRhdGVkQXRcbiAgICB9IGVsc2Uge1xuICAgICAgICBfdGhpcy51cGRhdGVkQXQgPSBfdGhpcy5jcmVhdGVkQXQ7XG4gICAgfVxuXG5cbiAgICBpZiAoY29uZiAmJiBjb25mLl9pZCkge1xuICAgICAgICBfaWQgPSBjb25mLl9pZFxuICAgIH0gZWxzZSB7XG4gICAgICAgIF9pZCA9IF9pZCArIHVpZCg2KTtcbiAgICB9XG5cbiAgICBfdGhpcy5faWQgPSBfaWQ7XG5cbiAgICByZXR1cm4gX3RoaXNcblxuXG4gICAgLy8gdGhpcy5sb2NhdGlvbnMgPSBldmVudC5sb2NhdGlvbnM7XG5cblxuXG59XG5cblxuXG5cbiJdfQ==
