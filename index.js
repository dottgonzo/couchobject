"use strict";
var uid = require("uid");
var Couchobj = (function () {
    function Couchobj(conf) {
        var _id;
        if (conf && conf._class) {
            this._class = conf._class;
            if (!conf || !conf._id)
                _id = _id + this._class + "_";
        }
        if (conf && conf._serial) {
            this._serial = conf._serial;
            if (!conf || !conf._id)
                _id = _id + this._serial + "_";
        }
        if (conf && conf._apiVersion)
            this._apiVersion = conf._apiVersion;
        if (conf && conf._createdAt) {
            this._createdAt = conf._createdAt;
        }
        else {
            this._createdAt = new Date().getTime();
        }
        if (conf && conf._updatedAt) {
            this._updatedAt = conf._updatedAt;
        }
        else {
            this._updatedAt = this._createdAt;
        }
        if (conf && conf._id) {
            _id = conf._id;
        }
        else {
            _id = _id + uid();
        }
        this._id = _id;
    }
    return Couchobj;
}());
module.exports = Couchobj;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFJQSxJQUFJLEdBQUcsR0FBUyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUM7QUE4Qi9CO0lBYUksa0JBQVksSUFBWTtRQUVwQixJQUFJLEdBQUcsQ0FBQztRQUdSLEVBQUUsQ0FBQyxDQUFDLElBQUksSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztZQUN0QixJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUM7WUFDMUIsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDO2dCQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsSUFBSSxDQUFDLE1BQU0sR0FBRyxHQUFHLENBQUM7UUFDMUQsQ0FBQztRQUNELEVBQUUsQ0FBQyxDQUFDLElBQUksSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztZQUN2QixJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUM7WUFDNUIsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDO2dCQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsSUFBSSxDQUFDLE9BQU8sR0FBRyxHQUFHLENBQUM7UUFDM0QsQ0FBQztRQUVELEVBQUUsQ0FBQyxDQUFDLElBQUksSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDO1lBQUMsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDO1FBR2xFLEVBQUUsQ0FBQyxDQUFDLElBQUksSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQztZQUMxQixJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUE7UUFDckMsQ0FBQztRQUFDLElBQUksQ0FBQyxDQUFDO1lBQ0osSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLElBQUksRUFBRSxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBQzNDLENBQUM7UUFDRCxFQUFFLENBQUMsQ0FBQyxJQUFJLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUM7WUFDMUIsSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFBO1FBQ3JDLENBQUM7UUFBQyxJQUFJLENBQUMsQ0FBQztZQUNKLElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQztRQUN0QyxDQUFDO1FBR0QsRUFBRSxDQUFDLENBQUMsSUFBSSxJQUFJLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1lBQ25CLEdBQUcsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFBO1FBSWxCLENBQUM7UUFBQyxJQUFJLENBQUMsQ0FBQztZQUVKLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxFQUFFLENBQUM7UUFFdEIsQ0FBQztRQUVELElBQUksQ0FBQyxHQUFHLEdBQUcsR0FBRyxDQUFDO0lBUW5CLENBQUM7SUFJTCxlQUFDO0FBQUQsQ0FqRUEsQUFpRUMsSUFBQTtBQUlELGlCQUFTLFFBQVEsQ0FBQSIsImZpbGUiOiJpbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImludGVyZmFjZSBJdWlkIHtcbiAgICAoKTogc3RyaW5nXG59XG5cbmxldCB1aWQ6IEl1aWQgPSByZXF1aXJlKFwidWlkXCIpO1xuXG5cbmludGVyZmFjZSBJQ291Y2hvYmoge1xuXG5cbiAgICBfaWQ6IHN0cmluZztcbiAgICBjcmVhdGVkQXQ6IG51bWJlcjtcbiAgICB1cGRhdGVkQXQ6IG51bWJlcjtcbiAgICBwZXJtYWxpbms6IHN0cmluZztcbiAgICB1aWQ6IHN0cmluZztcbiAgICBfcmV2OiBzdHJpbmc7XG4gICAgX2FwaVZlcnNpb246IHN0cmluZztcbiAgICBjbGFzczogc3RyaW5nO1xufVxuXG5cbmludGVyZmFjZSBJY29uZiB7XG5cbiAgICBfaWQ/OiBzdHJpbmc7XG4gICAgX2NyZWF0ZWRBdD86IG51bWJlcjtcbiAgICBfdXBkYXRlZEF0PzogbnVtYmVyO1xuICAgIF9zZXJpYWw/OiBzdHJpbmc7XG4gICAgX3Jldj86IHN0cmluZztcbiAgICBfYXBpVmVyc2lvbj86IHN0cmluZztcbiAgICBfY2xhc3M/OiBzdHJpbmc7XG5cbn1cblxuXG5jbGFzcyBDb3VjaG9iaiB7XG5cblxuICAgIF9pZDogc3RyaW5nO1xuICAgIF9jcmVhdGVkQXQ6IG51bWJlcjtcbiAgICBfdXBkYXRlZEF0OiBudW1iZXI7XG4gICAgX3NlcmlhbDogc3RyaW5nO1xuICAgIF9yZXY6IHN0cmluZztcbiAgICBfYXBpVmVyc2lvbjogc3RyaW5nO1xuICAgIF9jbGFzczogc3RyaW5nO1xuXG5cblxuICAgIGNvbnN0cnVjdG9yKGNvbmY/OiBJY29uZikge1xuXG4gICAgICAgIGxldCBfaWQ7XG5cblxuICAgICAgICBpZiAoY29uZiAmJiBjb25mLl9jbGFzcykge1xuICAgICAgICAgICAgdGhpcy5fY2xhc3MgPSBjb25mLl9jbGFzcztcbiAgICAgICAgICAgIGlmICghY29uZiB8fCAhY29uZi5faWQpIF9pZCA9IF9pZCArIHRoaXMuX2NsYXNzICsgXCJfXCI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbmYgJiYgY29uZi5fc2VyaWFsKSB7XG4gICAgICAgICAgICB0aGlzLl9zZXJpYWwgPSBjb25mLl9zZXJpYWw7XG4gICAgICAgICAgICBpZiAoIWNvbmYgfHwgIWNvbmYuX2lkKSBfaWQgPSBfaWQgKyB0aGlzLl9zZXJpYWwgKyBcIl9cIjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjb25mICYmIGNvbmYuX2FwaVZlcnNpb24pIHRoaXMuX2FwaVZlcnNpb24gPSBjb25mLl9hcGlWZXJzaW9uO1xuXG5cbiAgICAgICAgaWYgKGNvbmYgJiYgY29uZi5fY3JlYXRlZEF0KSB7XG4gICAgICAgICAgICB0aGlzLl9jcmVhdGVkQXQgPSBjb25mLl9jcmVhdGVkQXRcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2NyZWF0ZWRBdCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb25mICYmIGNvbmYuX3VwZGF0ZWRBdCkge1xuICAgICAgICAgICAgdGhpcy5fdXBkYXRlZEF0ID0gY29uZi5fdXBkYXRlZEF0XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl91cGRhdGVkQXQgPSB0aGlzLl9jcmVhdGVkQXQ7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGlmIChjb25mICYmIGNvbmYuX2lkKSB7XG4gICAgICAgICAgICBfaWQgPSBjb25mLl9pZFxuXG5cblxuICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICBfaWQgPSBfaWQgKyB1aWQoKTtcblxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5faWQgPSBfaWQ7XG4gICAgICAgXG5cblxuICAgICAgICAvLyB0aGlzLmxvY2F0aW9ucyA9IGV2ZW50LmxvY2F0aW9ucztcblxuXG5cbiAgICB9XG5cblxuXG59XG5cblxuXG5leHBvcnQgPSBDb3VjaG9ialxuIl19
